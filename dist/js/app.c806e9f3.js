(function(t){function e(e){for(var n,a,u=e[0],c=e[1],i=e[2],p=0,d=[];p<u.length;p++)a=u[p],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&d.push(s[a][0]),s[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(d.length)d.shift()();return o.push.apply(o,i||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],n=!0,u=1;u<r.length;u++){const c=r[u];0!==s[c]&&(n=!1)}n&&(o.splice(e--,1),t=a(a.s=r[0]))}return t}var n={},s={app:0},o=[];function a(e){if(n[e])return n[e].exports;const r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=t,a.c=n,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;const r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(const n in t)a.d(r,n,function(e){return t[e]}.bind(null,n));return r},a.n=function(t){const e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";let u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=e,u=u.slice();for(let i=0;i<u.length;i++)e(u[i]);var l=c;o.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("cd49")},"0c92":function(t,e,r){"use strict";const n=r("7393"),s=r.n(n);s.a},"59ad":function(t,e,r){"use strict";const n=r("9b1c"),s=r.n(n);s.a},"5c0b":function(t,e,r){"use strict";const n=r("9c0c"),s=r.n(n);s.a},7393:function(t,e,r){},"8ece":function(t,e,r){"use strict";const n=r("8ed8"),s=r.n(n);s.a},"8ed8":function(t,e,r){},"9b1c":function(t,e,r){},"9c0c":function(t,e,r){},c28d:function(t,e,r){},cd49:function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");const n=r("2b0e"),s=function(){const t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},o=[],a=(r("5c0b"),r("2877")),u={},c=Object(a["a"])(u,s,o,!1,null,null,null),i=c.exports,l=r("9483");Object(l["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});const p=r("8c4f"),d=function(){const t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"Wrapper"},[r("div",{staticClass:"login"},[r("div",{staticClass:"title"},[t._v("登录页")]),r("div",{staticClass:"username"},[r("span",[t._v("帐号：")]),r("el-input",{attrs:{placeholder:"请输入帐号",clearable:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),r("div",{staticClass:"password"},[r("span",[t._v("密码：")]),r("el-input",{attrs:{placeholder:"请输入密码",clearable:"","show-password":""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),r("el-button",{attrs:{type:"success"},on:{click:function(e){return t.toLogin(t.username,t.password)}}},[t._v("登陆帐号")]),r("div",{staticClass:"toSignUp"},[r("router-link",{attrs:{to:"/sign-up"}},[t._v("还没有帐号？点击注册")])],1)],1)])},f=[],h=(r("ac1f"),r("5319"),r("5c96")),g=r.n(h),v=(r("d3b7"),r("bc3a")),m=r.n(v);function b(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(n,s){const o={url:t,method:e};"get"===e.toLowerCase()?o.params=r:(o.data=r,console.log(o)),m()(o).then((function(t){0===t.data.code?n(t.data):(h["Message"].error(t.data.msg),s(t.data))})).catch((function(){h["Message"].error("网络异常"),s({msg:"网络异常"})}))}))}m.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",m.a.defaults.baseURL="http://127.0.0.1:3000",m.a.defaults.withCredentials=!0;const _={SIGNUP:"/auth/register",LOGIN:"/auth/login"},O={signUp:function(t){const e=t.username,r=t.password;return b(_.SIGNUP,"POST",{username:e,password:r})},login:function(t){const e=t.username,r=t.password;return b(_.LOGIN,"POST",{username:e,password:r})}},w={data:function(){return{username:"",password:""}},methods:{toLogin:function(t,e){const r=this;t?e?O.login({username:t,password:e}).then((function(e,n){e&&r.$router.replace("/records/".concat(t))})):h["Message"].error("密码不可为空！"):h["Message"].error("帐号不可为空！")}}},C=w,y=(r("8ece"),Object(a["a"])(C,d,f,!1,null,"ac7d14d4",null)),x=y.exports,E=function(){const t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"Wrapper"},[r("div",{staticClass:"login"},[r("div",{staticClass:"title"},[t._v("注册页")]),r("div",{staticClass:"username"},[r("span",[t._v("帐号：")]),r("el-input",{attrs:{placeholder:"请输入帐号",maxlength:"10",clearable:"","show-word-limit":""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),r("div",{staticClass:"password"},[r("span",[t._v("密码：")]),r("el-input",{attrs:{placeholder:"请输入密码",maxlength:"16",clearable:"","show-password":"","show-word-limit":""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),r("div",[r("el-button",{attrs:{type:"success"},on:{click:function(e){return t.toSignUp(t.username,t.password)}}},[t._v("注册帐号")]),r("router-link",{attrs:{to:"/login"}},[r("el-button",{attrs:{type:"danger"}},[t._v("取消注册")])],1)],1)])])},R=[],k={data:function(){return{username:"",password:""}},methods:{toSignUp:function(t,e){const r=this;t?e?O.signUp({username:t,password:e}).then((function(t,e){t&&(h["Message"].success("".concat(t.msg)),r.$router.replace("/login"))})):h["Message"].error("密码不可为空！"):h["Message"].error("帐号不可为空！")}}},T=k,S=(r("59ad"),Object(a["a"])(T,E,R,!1,null,"3ba9022b",null)),$=S.exports,D=function(){const t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"wrapper"},[r("div",{staticClass:"stage"},[r("el-button",{attrs:{type:"primary"},on:{click:t.goToBackstage}},[t._v("跳转到后台")])],1),r("div",{staticClass:"result"},[t.historyInput?r("div",{staticClass:"history"},[t._v(t._s(t.historyInput))]):t._e(),t.result?r("div",[t._v(t._s("="+this.result))]):r("div",[t._v(t._s(t.currentOutput))])]),r("div",{staticClass:"numberPad"},[r("button",{on:{click:t.onClear}},[t._v("C")]),r("button",{on:{click:t.onDeleteCount}},[t._v("删除")]),t._l(t.inputButton,(function(e){return r("button",{key:e,on:{click:t.onInputCount}},[t._v(t._s(e))])})),r("button",{on:{click:t.onComputed}},[t._v("=")])],2)])},I=[],P=(r("caad"),r("baa5"),r("fb6a"),r("25f0"),r("8a79"),r("2532"),r("466d"),{RESULT:"/calculate",CREATE_RECORD:"/create-record",GET_RECORDS:"/records",GET_DETAILS:"/records/details",DELETE:"/records/deleteRecord",UPDATE_RECORD:"/update-record"}),j={getResult:function(t){return b(P.RESULT,"POST",t)},createRecord:function(t){const e=t.username,r=t.expression,n=t.result;return b(P.CREATE_RECORD,"POST",{username:e,expression:r,result:n})},updateRecord:function(t){const e=t.recordID,r=t.expression,n=t.result;return b(P.UPDATE_RECORD,"POST",{recordID:e,expression:r,result:n})},getRecords:function(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return b(P.GET_RECORDS,"GET",{username:t,page:e})},deleteRecord:function(t){return b(P.DELETE,"POST",{recordID:t})},getRecordDetails:function(t){return b(P.GET_DETAILS,"GET",{recordID:t})}},M=function(t,e){return"*"===t||"/"===t||"%"===t||("+"!==t&&"-"!==t||"*"!==e&&"/"!==e&&"%"!==e)&&void 0},L=M,U=function(t){let e="0123456789",r="+-*/%",n=[],s=[],o=!0;r.includes(t[t.length-1])&&(t=t.substring(0,t.length-1));for(let a=0;a<t.length;a++)if(e.includes(t[a]))for(let u=a;u<t.length;u++){if(r.includes(t[u])){if(n.push(t.slice(a,u)),0!==s.length&&L(s[s.length-1],t[u])){if(L(s[s.length-1],t[u])){o=!0,n.push(s.pop());while(o)0!==s.length&&L(s[s.length-1],t[u])?L(s[s.length-1],t[u])&&n.push(s.pop()):(s.push(t[u]),o=!1)}}else s.push(t[u]),o=!1;a=u;break}if(u===t.length-1){n.push(t.slice(a,u+1));while(s.length>0)n.push(s.pop());a=u}}return n},G=U,A="0123456789",B="+-*/%",N=[],W={numberString:A,operatorString:B,numberStack:N,data:function(){return{inputButton:["%","/","7","8","9","*","4","5","6","-","1","2","3","+","0","."],suffixExpression:"",historyInput:"",currentOutput:"0",result:""}},methods:{onInputCount:function(t){this.result="";const e=t.target.textContent,r=this.currentOutput.length;if(16!==r)if("0"!==this.currentOutput){if("0"===this.currentOutput[r-1])for(let n=r-1;n>=0;n--)if(B.includes(this.currentOutput[n])&&"."!==e)return;B.includes(this.currentOutput[r-1])&&"."===e||this.currentOutput.includes(".")&&"."===e&&!this.currentOutput.slice(this.currentOutput.lastIndexOf(".")).match(/\+[0-9]|\-[0-9]|\*[0-9]|\/[0-9]|\%[0-9]?/)||B.includes(e)&&(B.includes(this.currentOutput[r-1])||this.currentOutput.endsWith("."))||(this.currentOutput+=e)}else A.includes(e)?this.currentOutput=e:(B.includes(e)||"."===e)&&(this.currentOutput+=e)},onComputed:function(){const t=this;if("0"!==this.currentOutput){this.suffixExpression=G(this.currentOutput);const e=this.$route.params.username,r=this.$route.params.recordID,n=this.currentOutput.valueOf();j.getResult(this.suffixExpression).then((function(s,o){if(s){t.historyInput=t.currentOutput,t.result=s.result,t.currentOutput=t.result.toString();const a=t.result;r?j.updateRecord({recordID:r,expression:n,result:a}).then((function(t,e){h["Message"].success(t.msg)})):j.createRecord({username:e,expression:n,result:a}).then((function(t,e){t&&h["Message"].success(t.msg)}))}})).catch((function(e){t.result=e.result,t.currentOutput="0",t.historyInput=""})),this.suffixExpression=[]}},onClear:function(){this.currentOutput="0",this.result="",this.historyInput=""},onDeleteCount:function(){if(this.currentOutput.length>1){if(this.result)return;this.currentOutput=this.currentOutput.substring(0,this.currentOutput.length-1)}else this.currentOutput="0",this.historyInput=""},goToBackstage:function(){this.$router.replace("/records/".concat(this.$route.params.username))}},created:function(){const t=this;j.getRecordDetails(this.$route.params.recordID).then((function(e,r){console.log(e.ret[0]),e.ret[0]&&(t.historyInput=e.ret[0].express,t.currentOutput=e.ret[0].result)}))}},F=W,J=(r("e197"),Object(a["a"])(F,D,I,!1,null,"bafb63c8",null)),q=J.exports,z=function(){const t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"contentWrapper"},[r("div",{staticClass:"text"},[r("p",[t._v(t._s("用户："+this.$route.params.username+"，欢迎使用简单计算器后台管理系统！"))]),r("el-button",{staticClass:"calculator",attrs:{type:"primary"},on:{click:t.toCalculator}},[t._v("使用计算器")]),r("el-button",{on:{click:t.logout}},[t._v("注销")])],1),t.records?r("div",{staticClass:"table"},[r("table",[t._m(0),r("tbody",t._l(t.records,(function(e){return r("tr",{key:e.id},[r("td",[t._v(t._s(e.id))]),r("td",[t._v(t._s(e.express))]),r("td",[t._v(t._s(e.result))]),r("td",[t._v(t._s(new Date(e.updateAt).toLocaleDateString()))]),r("td",[r("el-button",{attrs:{type:"primary"},on:{click:function(r){return t.updateRecord(e.id)}}},[t._v("再次计算")]),r("el-button",{attrs:{type:"danger"},on:{click:function(r){return t.deleteRecord(e.id)}}},[t._v("删除记录")])],1)])})),0)]),r("section",{staticClass:"pagination"},[r("el-pagination",{attrs:{layout:"prev, pager, next",total:t.total,"current-page":t.page},on:{"current-change":t.onPageChange}})],1)]):t._e()])},H=[function(){const t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("td",[r("p",[t._v("序列号")])]),r("td",[r("p",[t._v("表达式")])]),r("td",[r("p",[t._v("结果")])]),r("td",[r("p",[t._v("更新时间")])]),r("td",[r("p",[t._v("相关操作")])])])])}],K=(r("99af"),{data:function(){return{records:{},total:0,page:1}},methods:{getRecords:function(){const t=this,e=this.$route.params.username;j.getRecords(e).then((function(e,r){t.total=e.total,console.log(t.total),0!==t.total?(t.records=e.ret,t.page=Math.floor(t.total/10)):h["Message"].info("暂无数据，请使用计算器！")}))},onPageChange:function(t){const e=this;console.log(t);const r=this.$route.params.username;j.getRecords(r,t).then((function(t,r){e.records=t.ret,e.total=t.total,e.page=Math.floor(e.total/10)}))},logout:function(){this.$router.replace("/")},deleteRecord:function(t){const e=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){j.deleteRecord(t).then((function(t,r){t&&e.$message({type:"success",message:"".concat(t.msg)}),r&&e.$message({message:"".concat(r.msg)}),e.$router.go(0)}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},updateRecord:function(t){this.$router.replace("/calculate/".concat(this.$route.params.username,"/").concat(t))},toCalculator:function(){this.$router.replace("/calculate/".concat(this.$route.params.username))}},created:function(){this.getRecords()}}),Q=K,V=(r("0c92"),Object(a["a"])(Q,z,H,!1,null,"4fcbe6da",null)),X=V.exports;n["default"].use(p["a"]);const Y=[{path:"/",redirect:"/login"},{path:"/login",name:"Login",component:x},{path:"/sign-up",name:"SignUp",component:$},{path:"/calculate/:username",name:"Calculate",component:q},{path:"/calculate/:username/:recordID",name:"Calculate",component:q},{path:"/records/:username",name:"Records",component:X}],Z=new p["a"]({mode:"history",base:"/",routes:Y}),tt=Z,et=r("2f62");n["default"].use(et["a"]);const rt=new et["a"].Store({state:{},mutations:{},actions:{},modules:{}});r("0fae");n["default"].use(g.a),n["default"].config.productionTip=!1,new n["default"]({router:tt,store:rt,render:function(t){return t(i)}}).$mount("#app")},e197:function(t,e,r){"use strict";const n=r("c28d"),s=r.n(n);s.a}});
//# sourceMappingURL=app.c806e9f3.js.map